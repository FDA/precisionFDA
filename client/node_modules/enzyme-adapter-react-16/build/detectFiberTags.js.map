{"version":3,"sources":["../src/detectFiberTags.js"],"names":["getFiber","element","container","global","document","createElement","inst","Tester","React","Component","ReactDOM","render","_reactInternalFiber","child","getLazyFiber","LazyComponent","SuspenseWrapper","Suspense","fallback","module","exports","detectFiberTags","supportsMode","StrictMode","supportsContext","createContext","supportsForwardRef","forwardRef","supportsMemo","memo","supportsProfiler","unstable_Profiler","Profiler","supportsSuspense","supportsLazy","lazy","Fn","Cls","Ctx","FwdRef","props","ref","HostRoot","tag","ClassComponent","Fragment","FunctionalComponent","MemoSFC","MemoClass","HostPortal","createPortal","HostComponent","HostText","Mode","ContextConsumer","Consumer","ContextProvider","Provider","value","ForwardRef","id","onRender","Lazy"],"mappings":"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","file":"detectFiberTags.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { fakeDynamicImport } from 'enzyme-adapter-utils';\n\nfunction getFiber(element) {\n  const container = global.document.createElement('div');\n  let inst = null;\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return element;\n    }\n  }\n  ReactDOM.render(React.createElement(Tester), container);\n  return inst._reactInternalFiber.child;\n}\n\nfunction getLazyFiber(LazyComponent) {\n  const container = global.document.createElement('div');\n  let inst = null;\n  // eslint-disable-next-line react/prefer-stateless-function\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return React.createElement(LazyComponent);\n    }\n  }\n  // eslint-disable-next-line react/prefer-stateless-function\n  class SuspenseWrapper extends React.Component {\n    render() {\n      return React.createElement(\n        React.Suspense,\n        { fallback: false },\n        React.createElement(Tester),\n      );\n    }\n  }\n  ReactDOM.render(React.createElement(SuspenseWrapper), container);\n  return inst._reactInternalFiber.child;\n}\n\nmodule.exports = function detectFiberTags() {\n  const supportsMode = typeof React.StrictMode !== 'undefined';\n  const supportsContext = typeof React.createContext !== 'undefined';\n  const supportsForwardRef = typeof React.forwardRef !== 'undefined';\n  const supportsMemo = typeof React.memo !== 'undefined';\n  const supportsProfiler = typeof React.unstable_Profiler !== 'undefined' || typeof React.Profiler !== 'undefined';\n  const supportsSuspense = typeof React.Suspense !== 'undefined';\n  const supportsLazy = typeof React.lazy !== 'undefined';\n\n  function Fn() {\n    return null;\n  }\n  // eslint-disable-next-line react/prefer-stateless-function\n  class Cls extends React.Component {\n    render() {\n      return null;\n    }\n  }\n  let Ctx = null;\n  let FwdRef = null;\n  let LazyComponent = null;\n  if (supportsContext) {\n    Ctx = React.createContext();\n  }\n  if (supportsForwardRef) {\n    // React will warn if we don't have both arguments.\n    // eslint-disable-next-line no-unused-vars\n    FwdRef = React.forwardRef((props, ref) => null);\n  }\n  if (supportsLazy) {\n    LazyComponent = React.lazy(() => fakeDynamicImport(() => null));\n  }\n\n  return {\n    HostRoot: getFiber('test').return.return.tag, // Go two levels above to find the root\n    ClassComponent: getFiber(React.createElement(Cls)).tag,\n    Fragment: getFiber([['nested']]).tag,\n    FunctionalComponent: getFiber(React.createElement(Fn)).tag,\n    MemoSFC: supportsMemo\n      ? getFiber(React.createElement(React.memo(Fn))).tag\n      : -1,\n    MemoClass: supportsMemo\n      ? getFiber(React.createElement(React.memo(Cls))).tag\n      : -1,\n    HostPortal: getFiber(ReactDOM.createPortal(null, global.document.createElement('div'))).tag,\n    HostComponent: getFiber(React.createElement('span')).tag,\n    HostText: getFiber('text').tag,\n    Mode: supportsMode\n      ? getFiber(React.createElement(React.StrictMode)).tag\n      : -1,\n    ContextConsumer: supportsContext\n      ? getFiber(React.createElement(Ctx.Consumer, null, () => null)).tag\n      : -1,\n    ContextProvider: supportsContext\n      ? getFiber(React.createElement(Ctx.Provider, { value: null }, null)).tag\n      : -1,\n    ForwardRef: supportsForwardRef\n      ? getFiber(React.createElement(FwdRef)).tag\n      : -1,\n    Profiler: supportsProfiler\n      ? getFiber(React.createElement((React.Profiler || React.unstable_Profiler), { id: 'mock', onRender() {} })).tag\n      : -1,\n    Suspense: supportsSuspense\n      ? getFiber(React.createElement(React.Suspense, { fallback: false })).tag\n      : -1,\n    Lazy: supportsLazy\n      ? getLazyFiber(LazyComponent).tag\n      : -1,\n  };\n};\n"]}